
DROP TABLE Sale CASCADE CONSTRAINTS PURGE;

DROP TABLE Repair_on_site CASCADE CONSTRAINTS PURGE;

DROP TABLE Repair_off_site CASCADE CONSTRAINTS PURGE;

DROP TABLE Part CASCADE CONSTRAINTS PURGE;

DROP TABLE Fault CASCADE CONSTRAINTS PURGE;

DROP TABLE Appliance CASCADE CONSTRAINTS PURGE;

DROP TABLE Customer CASCADE CONSTRAINTS PURGE;

DROP TABLE Service_center CASCADE CONSTRAINTS PURGE;

DROP TABLE Manufacturer CASCADE CONSTRAINTS PURGE;

CREATE TABLE Manufacturer
(
	Manufactor_ID        NUMBER NOT NULL ,
	Manufactor_Name      VARCHAR2(30) NULL ,
	Manufactor_Phone     NUMBER(10) NULL ,
CONSTRAINT  XPKManufacturer PRIMARY KEY (Manufactor_ID)
);

CREATE TABLE Service_center
(
	Centre_ID            NUMBER NOT NULL ,
	Manufactor_ID        NUMBER(6) NULL ,
CONSTRAINT  XPKService_center PRIMARY KEY (Centre_ID),
CONSTRAINT Service_center_Manufacturer_FK FOREIGN KEY (Manufactor_ID) REFERENCES Manufacturer (Manufactor_ID)
);

CREATE TABLE Customer
(
	Customer_ID          NUMBER NOT NULL ,
	Customer_Name        VARCHAR2(30) NULL ,
	Customer_Phone       NUMBER(10) NULL ,
CONSTRAINT  XPKCustomer PRIMARY KEY (Customer_ID)
);

CREATE TABLE Appliance
(
	Serial_number        NUMBER NOT NULL ,
	Manufactor_ID        NUMBER NULL ,
	Guarantee            NUMBER NULL ,
	Appliance_Price      NUMBER(7,2) NULL ,
	Appliance_Name       VARCHAR2(30) NULL ,
	Brand                VARCHAR2(30) NULL ,
CONSTRAINT  XPKAppliance PRIMARY KEY (Serial_number),
CONSTRAINT Appliance_Manufacturer_FK FOREIGN KEY (Manufactor_ID) REFERENCES Manufacturer (Manufactor_ID)
);

CREATE TABLE Fault
(
	Date_Submitted       DATE NOT NULL ,
	Serial_number        NUMBER NOT NULL ,
	Customer_ID          NUMBER NULL ,
	Cust_Description     VARCHAR2(30) NULL ,
	Condition            VARCHAR2(30) NULL ,
CONSTRAINT  XPKFault PRIMARY KEY (Date_Submitted,Serial_number),
CONSTRAINT Fault_Customer_FK FOREIGN KEY (Customer_ID) REFERENCES Customer (Customer_ID),
CONSTRAINT Fault_Appliance_FK FOREIGN KEY (Serial_number) REFERENCES Appliance (Serial_number)
);

CREATE TABLE Part
(
	Part_ID              NUMBER NOT NULL ,
	Serial_number        NUMBER NOT NULL ,
	Date_Submitted       DATE NOT NULL ,
	Description          VARCHAR2(20) NULL ,
CONSTRAINT  XPKPart PRIMARY KEY (Part_ID,Serial_number,Date_Submitted),
CONSTRAINT Part_Fault_FK FOREIGN KEY (Date_Submitted, Serial_number) REFERENCES Fault (Date_Submitted, Serial_number)
);

CREATE TABLE Repair_off_site
(
	Serial_number        NUMBER NOT NULL ,
	Date_Submitted       DATE NOT NULL ,
	Part_ID              NUMBER NOT NULL ,
	Centre_ID            NUMBER NULL ,
	Date_of_Repair       DATE NULL ,
	Parts_Replaced       VARCHAR2(30) NULL ,
CONSTRAINT  XPKRepair_off_site PRIMARY KEY (Serial_number,Date_Submitted,Part_ID),
CONSTRAINT Repair_off_Srcv_center_FK FOREIGN KEY (Centre_ID) REFERENCES Service_center (Centre_ID),
CONSTRAINT Repair_off_Part_FK FOREIGN KEY (Part_ID, Serial_number, Date_Submitted) REFERENCES Part (Part_ID, Serial_number, Date_Submitted)
);

CREATE TABLE Repair_on_site
(
	Serial_number        NUMBER NOT NULL ,
	Date_Submitted       DATE NOT NULL ,
	Part_ID              NUMBER NOT NULL ,
	Date_of_Repair       DATE NULL ,
	Part_Replaced        VARCHAR2(30) NULL ,
	Duration_of_rep      NUMBER NULL ,
CONSTRAINT  XPKRepair_on_site PRIMARY KEY (Serial_number,Date_Submitted,Part_ID),
CONSTRAINT Repair_on_Part_FK FOREIGN KEY (Part_ID, Serial_number, Date_Submitted) REFERENCES Part (Part_ID, Serial_number, Date_Submitted)
);

CREATE TABLE Sale
(
	Sale_ID              NUMBER NOT NULL ,
	Customer_ID          NUMBER NULL ,
	Serial_number        NUMBER(6) NULL ,
	Date_of_Sale         DATE NULL ,
CONSTRAINT  XPKSale PRIMARY KEY (Sale_ID),
CONSTRAINT Sale_Customer_FK FOREIGN KEY (Customer_ID) REFERENCES Customer (Customer_ID),
CONSTRAINT Sale_Appliance_FK FOREIGN KEY (Serial_number) REFERENCES Appliance (Serial_number)
);

-- Insert Into Customer
INSERT INTO CUSTOMER (CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_PHONE)
VALUES (001,'Mason Cole',0981018877);

INSERT INTO CUSTOMER (CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_PHONE)
VALUES (002,'Chris Garneau',8886541122);

INSERT INTO CUSTOMER (CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_PHONE)
VALUES (003,'Jennifer Watson',894015975);

INSERT INTO CUSTOMER (CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_PHONE)
VALUES (004,'James Bourne',0861018877);

INSERT INTO CUSTOMER (CUSTOMER_ID,CUSTOMER_NAME,CUSTOMER_PHONE)
VALUES (005,'Mary Sands',018787654);


-- Insert in manufacturer
INSERT INTO manufacturer (MANUFACTOR_ID,MANUFACTOR_NAME, MANUFACTOR_PHONE)
VALUES (001,'Nintendo',018789898);

INSERT INTO manufacturer (MANUFACTOR_ID,MANUFACTOR_NAME, MANUFACTOR_PHONE)
VALUES (002,'Sony',013435566);

INSERT INTO manufacturer (MANUFACTOR_ID,MANUFACTOR_NAME, MANUFACTOR_PHONE)
VALUES (003,'Samsung',013432211);

INSERT INTO manufacturer (MANUFACTOR_ID,MANUFACTOR_NAME,MANUFACTOR_PHONE)
VALUES (004,'Breville',018989898);

INSERT INTO manufacturer (MANUFACTOR_ID,MANUFACTOR_NAME,MANUFACTOR_PHONE)
VALUES (005,'Microsoft',016768854);

-- insert into appliance
INSERT INTO appliance (SERIAL_NUMBER,MANUFACTOR_ID,GUARANTEE,APPLIANCE_PRICE,APPLIANCE_NAME)
VALUES (001,001,12,150.00,'Wii U Console');

INSERT INTO appliance (SERIAL_NUMBER,MANUFACTOR_ID,GUARANTEE,APPLIANCE_PRICE,APPLIANCE_NAME)
VALUES (002,002,36,1200.00,'Samsung TV 32"');

INSERT INTO appliance (SERIAL_NUMBER,MANUFACTOR_ID,GUARANTEE,APPLIANCE_PRICE,APPLIANCE_NAME)
VALUES (003,003,18,115.00,'Doc Dre Earphones');

INSERT INTO appliance (SERIAL_NUMBER,MANUFACTOR_ID,GUARANTEE,APPLIANCE_PRICE,APPLIANCE_NAME)
VALUES (004,004,24,46.00,'Livestrong Juicer 2015');

INSERT INTO appliance (SERIAL_NUMBER,MANUFACTOR_ID,GUARANTEE,APPLIANCE_PRICE,APPLIANCE_NAME)
VALUES (005,005,12,399.00,'Xbox One');

-- insert into fault
INSERT INTO FAULT (CUSTOMER_ID,SERIAL_NUMBER,CUST_DESCRIPTION,DATE_SUBMITTED,CONDITION)
VALUES (001,001,'Broken plug','17-JUN-2013','Plug fluse blown');

INSERT INTO FAULT (CUSTOMER_ID,SERIAL_NUMBER,CUST_DESCRIPTION,DATE_SUBMITTED,CONDITION)
VALUES (002,002,'No signal','15-MAY-2013','Receiver damaged');

INSERT INTO FAULT (CUSTOMER_ID,SERIAL_NUMBER,CUST_DESCRIPTION,DATE_SUBMITTED,CONDITION)
VALUES (003,003,'Frayed wire','02-FEB-2013','Wire stripped');

INSERT INTO FAULT (CUSTOMER_ID,SERIAL_NUMBER,CUST_DESCRIPTION,DATE_SUBMITTED,CONDITION)
VALUES (004,004,'Not spinning','10-APR-2013','Dead motor');

INSERT INTO FAULT (CUSTOMER_ID,SERIAL_NUMBER,CUST_DESCRIPTION,DATE_SUBMITTED,CONDITION)
VALUES (005,005,'No connection','21-JAN-2013','Port damaged');

--Part
INSERT INTO Part (PART_ID,Serial_number,Date_Submitted,Description)
VALUES (1, 001, '17-JUN-2013','Plug');

INSERT INTO Part (PART_ID,Serial_number,Date_Submitted,Description)
VALUES (2, 002, '15-MAY-2013', 'WiFi chip');

INSERT INTO Part (PART_ID,Serial_number,Date_Submitted,Description)
VALUES (3, 003, '02-FEB-2013', 'Caseing');

INSERT INTO Part (PART_ID,Serial_number,Date_Submitted,Description)
VALUES (4, 004, '10-APR-2013', 'Engine');

INSERT INTO Part (PART_ID,Serial_number,Date_Submitted,Description)
VALUES (5, 005, '21-JAN-2013', 'Monther board');

-- insert into sale
INSERT INTO SALE (SALE_ID,CUSTOMER_ID,SERIAL_NUMBER,DATE_OF_SALE)
VALUES (01, 001, 001, '19-JUN-2011');

INSERT INTO SALE (SALE_ID,CUSTOMER_ID,SERIAL_NUMBER,DATE_OF_SALE)
VALUES (02, 002, 002, '25-JAN-2011');

INSERT INTO SALE (SALE_ID,CUSTOMER_ID,SERIAL_NUMBER,DATE_OF_SALE)
VALUES (03, 003, 003, '12-FEB-2011');

INSERT INTO SALE (SALE_ID,CUSTOMER_ID,SERIAL_NUMBER,DATE_OF_SALE)
VALUES (04, 004, 004, '22-FEB-2011');

INSERT INTO SALE (SALE_ID,CUSTOMER_ID,SERIAL_NUMBER,DATE_OF_SALE)
VALUES (05, 005, 005, '01-MAR-2011');

-- Repair on site
INSERT INTO REPAIR_ON_SITE (PART_ID,SERIAL_NUMBER,DATE_OF_REPAIR,PART_REPLACED,DURATION_OF_REP,DATE_SUBMITTED)
VALUES (1, 001, '5-MAY-13', 'Fuse', 4, '17-JUN-2013');

INSERT INTO REPAIR_ON_SITE (PART_ID,SERIAL_NUMBER,DATE_OF_REPAIR,PART_REPLACED,DURATION_OF_REP,DATE_SUBMITTED)
VALUES (2, 002, '30-MAY-13', 'Receiver', 2,'15-MAY-2013');

INSERT INTO REPAIR_ON_SITE (PART_ID,SERIAL_NUMBER,DATE_OF_REPAIR,PART_REPLACED,DURATION_OF_REP,DATE_SUBMITTED)
VALUES (3, 003, '12-JAN-13', 'Wire', 4,'02-FEB-2013');

-- Service Centre
INSERT INTO service_center (CENTRE_ID,MANUFACTOR_ID)
VALUES (2, 1);

INSERT INTO service_center (CENTRE_ID,MANUFACTOR_ID)
VALUES (4, 2);

INSERT INTO service_center (CENTRE_ID,MANUFACTOR_ID)
VALUES (6, 3);

INSERT INTO service_center (CENTRE_ID,MANUFACTOR_ID)
VALUES (8, 4);

INSERT INTO service_center (CENTRE_ID,MANUFACTOR_ID)
VALUES (10, 5);

-- Repair off site
INSERT INTO repair_off_site (PART_ID,SERIAL_NUMBER,CENTRE_ID,DATE_OF_REPAIR, PARTS_REPLACED,DATE_SUBMITTED)
VALUES (4, 004, 2,'26-JUL-2015', 'Motor','10-APR-2013');

INSERT INTO repair_off_site (PART_ID,SERIAL_NUMBER,CENTRE_ID,DATE_OF_REPAIR, PARTS_REPLACED,DATE_SUBMITTED)
VALUES (5, 005, 4,'02-OCT-2015', 'LAN port','21-JAN-2013');

--GRANTS
GRANT ALL ON Sale TO okane, jlee;
GRANT ALL ON Repair_on_site TO okane, ogrogan;
GRANT ALL ON Repair_off_site TO okane, ogrogan;
GRANT ALL ON Fault TO okane, ogrogan;
GRANT ALL ON Appliance TO okane, jlee, ogrogan;
GRANT ALL ON Customer TO okane, jlee;
GRANT ALL ON Service_center TO okane, ogrogan;
GRANT ALL ON Manufacturer TO okane;

COMMIT;